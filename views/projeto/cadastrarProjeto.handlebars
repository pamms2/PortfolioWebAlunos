<form action="/cadastrarProjeto" method="post">
    <div class="form-group">
        <label for="inputNome">Nome</label>
        <input type="text" class="form-control" id="inputNome" name="nome">
    </div>
    <div class="form-group">
        <label for="inputResumo">Resumo</label>
        <textarea type="text" class="form-control" id="inputResumo" name="resumo" rows="5"></textarea>
    </div>
    <div class="form-group">
        <label for="inputLink">Link</label>
        <input type="text" class="form-control" id="inputLink" name="link">
    </div>
  
    <div class="form-group">
        <div class="form-group">
            <label for="inputPalavraChave">Palavras-Chave</label>

            <div id="palavras-container">
                <div class="input-group mb-2">
                    <select class="form-control" name="palavrasChave[]" id="inputPalavraChave">
                        <option value="" disabled selected>Selecione uma palavra</option>
                        {{#each palavras}}
                        <option value="{{this.id}}">{{this.nome}}</option>
                        {{/each}}
                    </select>
                <div class="input-group-append">
                <button type="button" class="btn btn-success addPalavraBtn">+</button>
            </div>
        </div>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const container = document.getElementById('palavras-container');

        function atualizarBotoes() {
          const botoes = container.querySelectorAll('.addPalavraBtn');
          botoes.forEach((btn, index) => {
            if (index === botoes.length - 1) {
              // último campo → botão de adicionar
              btn.textContent = '+';
              btn.classList.remove('btn-danger');
              btn.classList.add('btn-success');
              btn.onclick = adicionarCampo;
            } else {
              // anteriores → botão de remover
              btn.textContent = '–';
              btn.classList.remove('btn-success');
              btn.classList.add('btn-danger');
              btn.onclick = () => btn.closest('.input-group').remove();
            }
          });
        }

        function adicionarCampo() {
          const primeiro = container.querySelector('.input-group');
          const novo = primeiro.cloneNode(true);

          // limpa o valor do select
          novo.querySelector('select').selectedIndex = 0;
          container.appendChild(novo);

          atualizarBotoes();
        }

        atualizarBotoes();
      });
    </script>

    <button type="submit" class="btn btn-primary">Cadastrar Projeto</button>
</form>