<h2 class="mb-5 text-center text-primary fw-bold">Usuários do Sistema</h2>

<form method="get" action="/listarUsuario" class="mb-3 d-flex" style="gap: 8px;">
    <input type="text" name="nome" class="form-control" placeholder="Buscar por nome..." value="{{filtroNome}}">
    <button type="submit" class="btn btn-primary btn-sm">Buscar</button>
    <a href="/listarUsuario" class="btn btn-secondary btn-sm">Limpar</a>
</form>

<table class="table">
    <thead>
        <tr>
            <th scope="col">Nome</th>
            <th scope="col">Login</th>
            <th scope="col">Tipo</th>
            <th scope="col"></th>
            <th scope="col"></th>
        </tr>
    </thead>
    <tbody>
        {{#each usuarios}}
        <tr onclick="window.location='/visualizarUsuario/{{id}}'" style="cursor:pointer;">
            <td>{{nome}}</td>
            <td>{{login}}</td>
            <td>{{tipo}}</td>
            <td><a href="editarUsuario/{{id}}" onclick="event.stopPropagation()" class="text-decoration-none text-primary">Editar</a></td>
            <td><a href="excluirUsuario/{{id}}" onclick="event.stopPropagation()" class="text-decoration-none text-danger">Excluir</a></td>
        </tr>
        {{/each}}
        {{#unless usuarios}}
                    <tr>
                        <td colspan="{{#if admin}}3{{else if aluno}}2{{else}}2{{/if}}" class="text-center p-4 ps-4">
                            Nenhum usuário encontrado.
                        </td>
                    </tr>
        {{/unless}}
    </tbody>
</table>
<div class="mt-3 d-flex justify-content-between">
    {{#if (gt paginaAtual 1)}}
        <a href="/listarConhecimento?pagina={{subtract paginaAtual 1}}&titulo={{filtroTitulo}}" class="btn btn-outline-secondary btn-sm">Anterior</a>
    {{else}}
        <span class="btn btn-outline-secondary btn-sm disabled">Anterior</span>
    {{/if}}

    <span>Página {{paginaAtual}} de {{totalPaginas}}</span>

    {{#if (lt paginaAtual totalPaginas)}}
        <a href="/listarConhecimento?pagina={{add paginaAtual 1}}&titulo={{filtroTitulo}}" class="btn btn-outline-secondary btn-sm">Próxima</a>
    {{else}}
        <span class="btn btn-outline-secondary btn-sm disabled">Próxima</span>
    {{/if}}
</div>